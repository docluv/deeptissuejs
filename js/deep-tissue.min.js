(function(t,e,i){"use strict";HTMLElement.prototype.ha=HTMLElement.prototype.hasAttribute;var a=(document.querySelector,function(t,e){return new a.fn.init(t,e)});return a.fn=a.prototype={constructor:a,init:function(i,a){return i?(this.node="length"in i?i:[i],this.settings=e.extend({},this.settings,a),e.buildVendorNames(),this.touchType=t.navigator.msPointerEnabled?"pointer":"ontouchstart"in t?"touch":"mouse",this.hasMouse="ontouchstart"in t&&"onmousedown"in t,this.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown",this.touchEnd="pointer"===this.touchType?"MSPointerUp":"touch"===this.touchType?"touchend":"mouseup",this.touchOut="pointer"===this.touchType?"MSPointerOut":"touch"===this.touchType?"touchcancel":"mouseout",this.touchMove="pointer"===this.touchType?"MSPointerMove":"touch"===this.touchType?"touchmove":"mousemove",this.touchCancel="pointer"===this.touchType?"MSPointerCancel":"touch"===this.touchType?"touchcancel":"mouseout",this.hasmsGesture?this.setupMSGesture():(this.setUpTouchGestures(),this.setupTouch()),this):i},version:"0.0.5",hasMouse:"",touchType:"",touchStart:"",touchEnd:"",touchOut:"",touchMove:"",touchCancel:"",hasmsGesture:t.MSGesture,setUpTouchGestures:function(){var t=this;try{[].forEach.call(this.node,function(e){e.addEventListener("gesturestart",function(t){t.preventDefault()}),e.addEventListener("gesturechange",function(e){t.gestureChange.call(t,e)}),e.gStartScale=1,e.gStartRotation=0})}catch(e){return console.error("setUpTouchGestures is broken \r\n"+tl.innerText),!1}},setupMSGesture:function(){var t=this,e=this.settings;try{[].forEach.call(this.node,function(i){var a=new MSGesture;a&&(a.target=i,i.addEventListener("MSPointerDown",function(n){a.addPointer(n.pointerId),t.setupSwipe(n,i,e)}),i.addEventListener("MSGestureChange",function(e){t.msGestureChange.call(t,e)}),i.addEventListener("MSPointerDown",function(a){t.doDoubleTap(a,i,e)}),i.addEventListener("MSGestureEnd",function(){console.info("MSGestureEnd"),t.endGesture()}))})}catch(i){return!1}},endGesture:function(){this.swipping=!1,this.swipeX=null,this.swipeY=null},swipeRightCallback:e.noop,swipeLeftCallback:e.noop,swipeUpCallback:e.noop,swipeDownCallback:e.noop,moveCallback:e.noop,moveHorizontalCallback:e.noop,moveVerticalCallback:e.noop,rotateCallback:e.noop,scaleCallback:e.noop,tapCallback:e.noop,doubleTapCallback:e.noop,processGestureChange:function(t,e){var i=this,a=this.settings,n=t.target;n.ha(a.rotateIndicator)&&Math.abs(t.rotation)>a.rotateThreshold&&(a.autoRotate&&(n.style.transform=e.rotate(180*t.rotation/Math.PI)),this.rotateCallback(t,e)),n.ha(a.scaleIndicator)&&Math.abs(t.scale)>a.scaleThreshold&&(a.autoScale&&(n.style.transform=e.scale(t.scale)),this.scaleCallback(t,e)),n.ha(a.moveIndicator)&&(Math.abs(t.translationX)>a.moveThreshold||Math.abs(t.translationY)>a.moveThreshold)&&(a.autoMove&&(n.style.transform=e.translate(t.translationX,t.translationY,0)),this.moveCallback(t,e)),n.ha(a.horizontalIndicator)&&Math.abs(t.translationX)>a.moveThreshold&&(a.autoHorizontalMove&&(t.target.style.transform=e.translate(t.translationX,0,0)),this.moveHorizontalCallback(t,e)),n.ha(a.verticalIndicator)&&Math.abs(t.translationY)>a.moveThreshold&&(a.autoVerticalMove&&(t.target.style.transform=e.translate(0,t.translationY,0)),this.moveVerticalCallback(t,e)),i.processSwipe(n,t,a,e)},processSwipe:function(t,e,i,a){var n=this;if(a=a||{},t.ha(i.swipeRight)&&!n.swipping&&(null===n.swipeX?n.swipeX=e.clientX:t.ha(i.swipeRightInit)&&e.clientX>n.swipeX&&e.clientX-n.swipeX>i.swipeRightThreshold&&(n.swipping||(console.info("swipeRight"),n.swipping=!0,n.swipeX=null,n.swipeY=null,n.swipeRightCallback(e,a)))),t.ha(i.swipeLeft)&&!n.swipping&&(null===n.swipeX?n.swipeX=e.clientX:t.ha(i.swipeLeftInit)&&e.clientX<n.swipeX&&e.clientX-n.swipeX<i.swipeLeftThreshold&&(n.swipping||(console.info("swipe Left"),n.swipping=!0,n.swipeX=null,n.swipeY=null,n.swipeLeftCallback(e,a)))),t.ha(i.swipeUp)&&!n.swipping)if(null===n.swipeY)n.swipeY=e.clientY;else{var o=e.clientY>=0?e.clientY:0;t.ha(i.swipeUpInit)&&e.clientY<n.swipeY&&o-n.swipeY<i.swipeUpThreshold&&(n.swipping||(console.info("swipeUp"),n.swipping=!0,n.swipeX=null,n.swipeY=null,n.swipeUpCallback(e,a)))}t.ha(i.swipeDown)&&!n.swipping&&(null===n.swipeY?n.swipeY=e.clientY:t.ha(i.swipeDownInit)&&e.clientY>n.swipeY&&e.clientY-n.swipeY>i.swipeDownThreshold&&(n.swipping||(console.info("swipe Down"),n.swipping=!0,n.swipeY=null,n.swipeX=null,n.swipeDownCallback(e,a))))},swipping:!1,swipeX:null,swipeY:null,gestureChange:function(t){var e=t.target,i=this.settings;t.preventDefault(),console.info("gesture Change \r\n"+e.ha(i.rotateIndicator)+"\r\n"),e.ha(i.rotateIndicator)&&Math.abs(t.rotation)>i.rotateThreshold&&(e.style.webkitTransform="rotate("+(e.gStartRotation+t.rotation)+"deg)",this.rotateCallback(t,m)),e.ha(i.scaleIndicator)&&Math.abs(t.scale)>i.scaleThreshold&&(e.style.webkitTransform="scale("+e.gStartScale*t.scale+") ",this.scaleCallback(t,m))},msGestureChange:function(e){t.MSCSSMatrix&&this.processGestureChange(e,new MSCSSMatrix(e.target.style.transform))},calculateTranslation:function(t,e){return{translationX:e.x-t.x,translationY:e.y-t.y}},setupIndicator:function(t,e,a,n,o){var s=this,r=s.settings;t!==i&&(s[e]=t),a&&(s.settings[n]=a),[].forEach.call(s.node,function(t){t.setAttribute(r[o],"true")})},PreventDefaultManipulationAndMouseEvent:function(t){return t.preventDefault?(t.preventDefault(),i):t.preventManipulation?(t.preventManipulation(),i):t.preventMouseEvent?(t.preventMouseEvent(),i):i},getTouchPoints:function(t){var e,a=this,n=t.changedTouches!==i?t.changedTouches:[t],o=n[n.length-1];return e="pointer"===a.touchType?{x:o.x,y:o.y}:"touch"===a.touchType?{x:o.pageX,y:o.pageY}:{x:t.pageX,y:t.pageY}},node:i,div:i,support:{},doDoubleTap:function(t,e,i){var a=this;e.ha(i.doubleTapIndicator)&&e.ha(i.doubleTapStart)&&(e.removeAttribute(i.doubleTapStart),clearTimeout(e.getAttribute(i.doubleTapStart)),a.doubleTapCallback(t)),e.ha(i.doubleTapIndicator)&&!e.ha(i.doubleTapStart)&&e.setAttribute(i.doubleTapStart,setTimeout(function(){e.removeAttribute(i.doubleTapStart),clearTimeout(e.getAttribute(i.doubleTapStart))},i.doubleTapThreshold))},setupSwipe:function(t,e,i){var a=this;e.ha(i.swipeRight)&&(e.removeAttribute(i.swipeRightEnd),e.ha(i.swipeRightInit)||e.setAttribute(i.swipeRightInit,JSON.stringify(a.getTouchPoints(t)))),e.ha(i.swipeLeft)&&(e.removeAttribute(i.swipeLeftEnd),e.ha(i.swipeLeftInit)||e.setAttribute(i.swipeLeftInit,JSON.stringify(a.getTouchPoints(t)))),e.ha(i.swipeUp)&&(e.removeAttribute(i.swipeUpEnd),e.ha(i.swipeUpInit)||e.setAttribute(i.swipeUpInit,JSON.stringify(a.getTouchPoints(t)))),e.ha(i.swipeDown)&&(e.removeAttribute(i.swipeDownEnd),e.ha(i.swipeDownInit)||e.setAttribute(i.swipeDownInit,JSON.stringify(a.getTouchPoints(t))))},setupTouch:function(){var t=this,e=this.settings;[].forEach.call(this.node,function(i){var a=function(a){a.preventDefault(),t.touchMoveHandler.call(t,a,i,e)},n=function(a){a.preventDefault(),t.endTouchHandler.call(t,a,i,e)},o=function(a){a.preventDefault(),t.startTouchHandler.call(t,a,i,e)};i.addEventListener(t.touchStart,o),i.addEventListener(t.touchMove,a),i.addEventListener(t.touchEnd,n),i.addEventListener(t.touchCancel,n),i.addEventListener("mouseout",n),i.addEventListener("mouseup",n),i.addEventListener(t.touchEnd,function(){console.info("touchEnd")}),i.addEventListener("mouseout",function(){console.info("mouseout")}),i.addEventListener("mouseup",function(){console.info("mouseup")}),i.addEventListener(t.touchCancel,function(){console.info("touchCancel")}),i.addEventListener(t.touchOut,function(){console.info("touchOut")}),t.hasMouse&&(i.addEventListener("mousedown",o),i.addEventListener("mousemove",a),i.addEventListener("mouseup",n))})},startTouchHandler:function(t,e,i){var a=this;i=this.settings,t.preventDefault(),console.info("touch start"),e.ha(i.moveIndicator)&&(e.removeAttribute(i.moveTouchEnded),e.ha(i.moveTouchInitial)||e.setAttribute(i.moveTouchInitial,JSON.stringify(a.getTouchPoints(t)))),e.ha(i.horizontalIndicator)&&(e.removeAttribute(i.horizontalTouchEnd),e.ha(i.horizontalTouchInit)||e.setAttribute(i.horizontalTouchInit,JSON.stringify(a.getTouchPoints(t)))),e.ha(i.verticalIndicator)&&(e.removeAttribute(i.verticalTouchEnd),e.ha(i.verticalTouchInit)||e.setAttribute(i.verticalTouchInit,JSON.stringify(a.getTouchPoints(t)))),a.setupSwipe(t,e,i),e.ha(i.tapIndicator)&&!e.ha(i.tapStart)&&e.setAttribute(i.tapStart,setTimeout(function(){clearTimeout(e.getAttribute(i.tapStart)),e.removeAttribute(i.doubleTapStart)},700)),a.doDoubleTap(t,e,i)},endTouchHandler:function(t,e,i){var a=this;i=this.settings,t.preventDefault(),e.ha(i.moveTouchInitial)&&e.setAttribute(i.moveTouchEnded,"true"),e.ha(i.horizontalIndicator)&&e.setAttribute(i.horizontalTouchEnd,"true"),e.ha(i.verticalIndicator)&&e.setAttribute(i.verticalTouchEnd,"true"),e.ha(i.swipeRight)&&(a.swipping=!1,e.setAttribute(i.swipeRightEnd,"true"),e.removeAttribute(i.swipeRightInit)),e.ha(i.swipeLeft)&&(a.swipping=!1,e.setAttribute(i.swipeLeftEnd,"true"),e.removeAttribute(i.swipeLeftInit)),e.ha(i.swipeUp)&&(a.swipping=!1,e.setAttribute(i.swipeUpEnd,"true"),e.removeAttribute(i.swipeUpInit)),e.ha(i.swipeDown)&&(a.swipping=!1,e.setAttribute(i.swipeDownEnd,"true"),e.removeAttribute(i.swipeDownInit)),e.ha(i.tapIndicator)&&e.ha(i.tapStart)&&(a.tapCallback(t),clearTimeout(e.getAttribute(i.tapStart)),e.removeAttribute(i.tapStart))},touchMoveHandler:function(t,e,i){var a=this;if(i=this.settings,t.preventDefault(),e.ha(i.moveIndicator)&&!e.ha(i.moveTouchEnded)&&e.ha(i.moveTouchInitial)&&(n=JSON.parse(e.getAttribute(i.moveTouchInitial)),o=a.getTouchPoints(t),s=a.calculateTranslation(n,o),e.style[a.support.transform]="translate3D("+s.translationX+"px, "+s.translationY+"px, 0)"),e.ha(i.horizontalIndicator)&&!e.ha(i.horizontalTouchEnd)&&e.ha(i.horizontalTouchInit)){console.log("should -horizontal move");var n=JSON.parse(e.getAttribute(i.horizontalTouchInit)),o=a.getTouchPoints(t),s=a.calculateTranslation(n,o);Math.abs(s.translationX)>a.settings.moveThreshold&&(e.style[a.support.transform]="translate3D("+s.translationX+"px, 0, 0)")}if(e.ha(i.verticalIndicator)&&!e.ha(i.verticalTouchEnd)&&e.ha(i.verticalTouchInit)){var n=JSON.parse(e.getAttribute(i.verticalTouchInit)),o=a.getTouchPoints(t),s=a.calculateTranslation(n,o);Math.abs(s.translationY)>a.settings.moveThreshold&&(e.style[a.support.transform]="translate3D(0, "+s.translationY+"px, 0)")}(e.ha(i.swipeRightInit)||e.ha(i.swipeLefttInit)||e.ha(i.swipeUpInit)||e.ha(i.swipeDownInit))&&(t.touches&&(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY),a.processSwipe(e,t,i))},swipeRight:function(t,e){return this.setupIndicator(t,"swipeRightCallback",e,"swipeRightThreshold","swipeRight"),this},swipeLeft:function(t,e){return this.setupIndicator(t,"swipeLeftCallback",e,"swipeLeftThreshold","swipeLeft"),this},swipeUp:function(t,e){return this.setupIndicator(t,"swipeUpCallback",e,"swipeUpThreshold","swipeUp"),this},swipeDown:function(t,e){return this.setupIndicator(t,"swipeDownCallback",e,"swipeDownThreshold","swipeDown"),this},move:function(t){return this.setupIndicator(t,"moveCallback",0,"","moveIndicator"),this},horizontalMove:function(t){return this.setupIndicator(t,"moveHorizontalCallback",0,"","horizontalIndicator"),this},verticalMove:function(t){return this.setupIndicator(t,"moveVerticalCallback",0,"","verticalIndicator"),this},rotate:function(t){return this.setupIndicator(t,"rotateCallback",0,"","rotateIndicator"),this},scale:function(t){return this.setupIndicator(t,"scaleCallback",0,"","scaleIndicator"),this},tap:function(t){var i=this;return t||(t=e.noop),i.hasmsGesture?[].forEach.call(this.node,function(e){e.addEventListener("MSGestureTap",t,!1)}):this.setupIndicator(t,"tapCallback",0,"","tapIndicator"),this},dblTap:function(t){var e=this.settings;return document.querySelector(".touch-log"),t&&(e.doubleTapCallback=t),this.setupIndicator(t,"doubleTapCallback",0,"","doubleTapIndicator"),this},tapHold:function(t,e,i){var a=this;return t&&(a.tapHoldBeginCallback=t),this.hasmsGesture?(a.tapHoldBeginCallback=t,a.tapHoldEndCallback=e,a.tapHoldCancelCallback=i,[].forEach.call(this.node,function(t){a.preventTapHoldContext(t),t.addEventListener("MSGestureHold",function(t){a.tapHoldCallback.call(a,t)},!1)})):[].forEach.call(this.node,function(t){a.preventTapHoldContext(t),t.addEventListener(a.touchStart,function(e){a.setupTapHold(t,e)}),a.hasMouse&&t.addEventListener("mousedown",function(e){a.setupTapHold(t,e)})},!1),this},preventTapHoldContext:function(t){t.addEventListener("contextmenu",function(t){t.preventDefault()},!1)},setupTapHold:function(t,e){var i,a=this;i=setTimeout(function(){a.tapHoldBeginCallback.call(a,e),clearTimeout(i)},500),t.addEventListener(a.touchEnd,function(){clearTimeout(i)},!1),t.addEventListener(a.touchCancel,function(){clearTimeout(i)},!1)},tapHoldBeginCallback:e.noop,tapHoldEndCallback:e.noop,tapHoldCancelCallback:e.noop,tapHoldCallback:function(t){var e=this;t.preventDefault(),t.detail&t.MSGESTURE_FLAG_BEGIN&&e.tapHoldBeginCallback.call(e,t),t.detail&t.MSGESTURE_FLAG_END&&e.tapHoldEndCallback.call(e,t),t.detail&t.MSGESTURE_FLAG_CANCEL&&e.tapHoldCancelCallback.call(e,t)},settings:{allowPageScroll:!0,logging:!1,swipeRightThreshold:25,swipeLeftThreshold:-25,swipeUpThreshold:-25,swipeDownThreshold:25,moveThreshold:0,rotateThreshold:0,scaleThreshold:0,doubleTapThreshold:700,tapIndicator:"data-tap",tapStart:"data-tap-start",tapEnded:"data-tap-end",doubleTapIndicator:"data-dbltap",doubleTapStart:"data-dbltap-start",doubleTapEnded:"data-dbltap-end",rotateIndicator:"data-rotate",rotateEnded:"data-rotate-ended",rotateInitial:"data-rotate-initial",scaleIndicator:"data-scale",scaleEnded:"data-scale-ended",scaleInitial:"data-scale-initial",moveIndicator:"data-move",moveTouchEnded:"data-move-touch-ended",moveTouchInitial:"data-move-touch-initial",swipeRight:"data-swiperight",swipeRightInit:"data-swiperight-init",swipeRightEnd:"data-swiperight-end",swipeLeft:"data-swipeleft",swipeLeftInit:"data-swipeLeft-init",swipeLeftEnd:"data-swipeleft-end",swipeUp:"data-swipeup",swipeUpInit:"data-swipeup-init",swipeUpEnd:"data-swipeup-end",swipeDown:"data-swipedown",swipeDownInit:"data-swipedown-init",swipeDownEnd:"data-swipedown-end",horizontalIndicator:"data-move-horizontal",horizontalTouchInit:"data-horizontal-touch-initial",horizontalTouchEnd:"data-horizontal-touch-ended",verticalIndicator:"data-move-vertical",verticalTouchInit:"data-vertical-touch-initial",verticalTouchEnd:"data-vertical-touch-ended",autoMove:!0,autoRotate:!0,autoScale:!0,autoHorizontalMove:!0,autoVerticalMove:!0}},a.fn.init.prototype=a.fn,t.deeptissue=a})(window,$),function(t,e){"use strict";e.fn.move=function(t){return this.setupIndicator(t,"moveCallback",0,"","moveIndicator"),this},e.fn.horizontalMove=function(t){return this.setupIndicator(t,"moveHorizontalCallback",0,"","horizontalIndicator"),this},e.fn.verticalMove=function(t){return this.setupIndicator(t,"moveVerticalCallback",0,"","verticalIndicator"),this}}(window,deeptissue),function(t,e){"use strict";e.fn.swipeRight=function(t,e){return this.setupIndicator(t,"swipeRightCallback",e,"swipeRightThreshold","swipeRight"),this},e.fn.swipeLeft=function(t,e){return this.setupIndicator(t,"swipeLeftCallback",e,"swipeLeftThreshold","swipeLeft"),this},e.fn.swipeUp=function(t,e){return this.setupIndicator(t,"swipeUpCallback",e,"swipeUpThreshold","swipeUp"),this},e.fn.swipeDown=function(t,e){return this.setupIndicator(t,"swipeDownCallback",e,"swipeDownThreshold","swipeDown"),this}}(window,deeptissue),function(t,e){"use strict";e.fn.tap=function(t){var e=this;return t||(t=function(){}),e.hasmsGesture?[].forEach.call(this.node,function(e){e.addEventListener("MSGestureTap",t,!1)}):this.setupIndicator(t,"tapCallback",0,"","tapIndicator"),this},e.fn.dblTap=function(t){var e=this.settings;return document.querySelector(".touch-log"),t&&(e.doubleTapCallback=t),this.setupIndicator(t,"doubleTapCallback",0,"","doubleTapIndicator"),this},e.fn.tapHold=function(t){var e=this;return t&&(e.tapHoldBeginCallback=t),this.hasmsGesture?[].forEach.call(this.node,function(t){t.addEventListener("MSGestureHold",function(t){e.tapHoldCallback.call(e,t)},!1)}):[].forEach.call(this.node,function(t){t.addEventListener(e.touchStart,function(i){e.setupTapHold(t,i)}),e.hasMouse&&t.addEventListener("mousedown",function(i){e.setupTapHold(t,i)})},!1),this},e.fn.setupTapHold=function(t,e){var i,a=this;i=setTimeout(function(){a.tapHoldBeginCallback.call(a,e),clearTimeout(i)},500),t.addEventListener(a.touchEnd,function(){clearTimeout(i)},!1),t.addEventListener(a.touchCancel,function(){clearTimeout(i)},!1)},e.fn.tapHoldBeginCallback=function(){},e.fn.tapHoldEndCallback=function(){},e.fn.tapHoldCancelCallback=function(){},e.fn.tapHoldCallback=function(t){console.info("evt.detail - "+t.detail),t.detail&t.MSGESTURE_FLAG_BEGIN&&this.tapHoldBeginCallback.call(this,t),t.detail&t.MSGESTURE_FLAG_END&&this.tapHoldEndCallback.call(this,t),t.detail&t.MSGESTURE_FLAG_CANCEL&&this.tapHoldCancelCallback.call(this,t)}}(window,deeptissue),function(t,e){"use strict";e.fn.rotate=function(t){return this.setupIndicator(t,"rotateCallback",0,"","rotateIndicator"),this}}(window,deeptissue),function(t,e){"use strict";e.fn.scale=function(t){return this.setupIndicator(t,"scaleCallback",0,"","scaleIndicator"),this}}(window,deeptissue);