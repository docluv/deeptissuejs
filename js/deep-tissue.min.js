/*
Copyright (c) 2013 Chris Love

http://deeptissuejs.com
https://github.com/docluv/deeptissuejs

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/


!function(a,b,c){"use strict";function d(a){return document.querySelector(a)}return HTMLElement.prototype.ha=HTMLElement.prototype.hasAttribute,deeptissue=function(a,b){return new deeptissue.fn.init(a,b)},deeptissue.fn=deeptissue.prototype={constructor:deeptissue,init:function(c,d){return c?(this.node="length"in c?c:[c],this.settings=b.extend({},this.settings,d),this.support=b.buildVendorNames(),this.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",this.hasMouse="ontouchstart"in a&&"onmousedown"in a,this.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown",this.touchEnd="pointer"===this.touchType?"MSPointerUp":"touch"===this.touchType?"touchend":"mouseup",this.touchOut="pointer"===this.touchType?"MSPointerOut":"touch"===this.touchType?"touchcancel":"mouseout",this.touchMove="pointer"===this.touchType?"MSPointerMove":"touch"===this.touchType?"touchmove":"mousemove",this.touchCancel="pointer"===this.touchType?"MSPointerCancel":"touch"===this.touchType?"touchcancel":"mouseout",this.hasmsGesture?this.setupMSGesture():(this.setUpTouchGestures(),this.setupTouch()),this):c},version:"0.0.5",hasMouse:"",touchType:"",touchStart:"",touchEnd:"",touchOut:"",touchMove:"",touchCancel:"",hasmsGesture:a.MSGesture,setUpTouchGestures:function(){var a=this;try{[].forEach.call(this.node,function(b){b.addEventListener("gesturestart",function(a){a.preventDefault()}),b.addEventListener("gesturechange",function(b){a.gestureChange.call(a,b)}),b.gStartScale=1,b.gStartRotation=0})}catch(b){return console.error("setUpTouchGestures is broken \r\n"+tl.textContent),!1}},setupMSGesture:function(){var a=this,b=this.settings;try{[].forEach.call(this.node,function(c){var d=new MSGesture;d&&(d.target=c,c.addEventListener("MSPointerDown",function(e){d.addPointer(e.pointerId),a.setupSwipe(e,c,b)}),c.addEventListener("MSGestureChange",function(b){a.msGestureChange.call(a,b)}),c.addEventListener("MSPointerDown",function(d){a.doDoubleTap(d,c,b)}),c.addEventListener("MSGestureEnd",function(){console.info("MSGestureEnd"),a.endGesture()}))})}catch(c){return!1}},endGesture:function(){this.swipping=!1,this.swipeX=null,this.swipeY=null},swipeRightCallback:b.noop,swipeLeftCallback:b.noop,swipeUpCallback:b.noop,swipeDownCallback:b.noop,moveCallback:b.noop,moveHorizontalCallback:b.noop,moveVerticalCallback:b.noop,rotateCallback:b.noop,scaleCallback:b.noop,tapCallback:b.noop,doubleTapCallback:b.noop,processGestureChange:function(a,b){var c=this,d=this.settings,e=a.target;e.ha(d.rotateIndicator)&&Math.abs(a.rotation)>d.rotateThreshold&&(d.autoRotate&&(e.style.transform=b.rotate(180*a.rotation/Math.PI)),this.rotateCallback(a,b)),e.ha(d.scaleIndicator)&&Math.abs(a.scale)>d.scaleThreshold&&(d.autoScale&&(e.style.transform=b.scale(a.scale)),this.scaleCallback(a,b)),e.ha(d.moveIndicator)&&(Math.abs(a.translationX)>d.moveThreshold||Math.abs(a.translationY)>d.moveThreshold)&&(d.autoMove&&(e.style.transform=b.translate(a.translationX,a.translationY,0)),this.moveCallback(a,b)),e.ha(d.horizontalIndicator)&&Math.abs(a.translationX)>d.moveThreshold&&(d.autoHorizontalMove&&(a.target.style.transform=b.translate(a.translationX,0,0)),this.moveHorizontalCallback(a,b)),e.ha(d.verticalIndicator)&&Math.abs(a.translationY)>d.moveThreshold&&(d.autoVerticalMove&&(a.target.style.transform=b.translate(0,a.translationY,0)),this.moveVerticalCallback(a,b)),c.processSwipe(e,a,d,b)},processSwipe:function(a,b,c,d){var e=this;if(d=d||{},a.ha(c.swipeRight)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.ha(c.swipeRightInit)&&b.clientX>e.swipeX&&b.clientX-e.swipeX>c.swipeRightThreshold&&(e.swipping||(console.info("swipeRight"),e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeRightCallback(b,d)))),a.ha(c.swipeLeft)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.ha(c.swipeLeftInit)&&b.clientX<e.swipeX&&b.clientX-e.swipeX<c.swipeLeftThreshold&&(e.swipping||(console.info("swipe Left"),e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeLeftCallback(b,d)))),a.ha(c.swipeUp)&&!e.swipping)if(null===e.swipeY)e.swipeY=b.clientY;else{var f=b.clientY>=0?b.clientY:0;a.ha(c.swipeUpInit)&&b.clientY<e.swipeY&&f-e.swipeY<c.swipeUpThreshold&&(e.swipping||(console.info("swipeUp"),e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeUpCallback(b,d)))}a.ha(c.swipeDown)&&!e.swipping&&(null===e.swipeY?e.swipeY=b.clientY:a.ha(c.swipeDownInit)&&b.clientY>e.swipeY&&b.clientY-e.swipeY>c.swipeDownThreshold&&(e.swipping||(console.info("swipe Down"),e.swipping=!0,e.swipeY=null,e.swipeX=null,e.swipeDownCallback(b,d))))},swipping:!1,swipeX:null,swipeY:null,gestureChange:function(a){var b=a.target,c=this.settings;a.preventDefault(),console.info("gesture Change \r\n"+b.ha(c.rotateIndicator)+"\r\n"),b.ha(c.rotateIndicator)&&Math.abs(a.rotation)>c.rotateThreshold&&(b.style.webkitTransform="rotate("+(b.gStartRotation+a.rotation)+"deg)",this.rotateCallback(a,m)),b.ha(c.scaleIndicator)&&Math.abs(a.scale)>c.scaleThreshold&&(b.style.webkitTransform="scale("+b.gStartScale*a.scale+") ",this.scaleCallback(a,m))},msGestureChange:function(b){a.MSCSSMatrix&&this.processGestureChange(b,new MSCSSMatrix(b.target.style.transform))},calculateTranslation:function(a,b){return{translationX:b.x-a.x,translationY:b.y-a.y}},setupIndicator:function(a,b,d,e,f){var g=this,h=g.settings;a!==c&&(g[b]=a),d&&(g.settings[e]=d),[].forEach.call(g.node,function(a){a.setAttribute(h[f],"true")})},PreventDefaultManipulationAndMouseEvent:function(a){return a.preventDefault?void a.preventDefault():a.preventManipulation?void a.preventManipulation():a.preventMouseEvent?void a.preventMouseEvent():void 0},getTouchPoints:function(a){var b,c=this,d="undefined"!=typeof a.changedTouches?a.changedTouches:[a],e=d[d.length-1];return b="pointer"===c.touchType?{x:e.x,y:e.y}:"touch"===c.touchType?{x:e.pageX,y:e.pageY}:{x:a.pageX,y:a.pageY}},node:c,div:c,support:{},doDoubleTap:function(a,b,c){var d=this;b.ha(c.doubleTapIndicator)&&b.ha(c.doubleTapStart)&&(b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart)),d.doubleTapCallback(a)),b.ha(c.doubleTapIndicator)&&!b.ha(c.doubleTapStart)&&b.setAttribute(c.doubleTapStart,setTimeout(function(){b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart))},c.doubleTapThreshold))},setupSwipe:function(a,b,c){var d=this;b.ha(c.swipeRight)&&(b.removeAttribute(c.swipeRightEnd),b.ha(c.swipeRightInit)||b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeLeft)&&(b.removeAttribute(c.swipeLeftEnd),b.ha(c.swipeLeftInit)||b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeUp)&&(b.removeAttribute(c.swipeUpEnd),b.ha(c.swipeUpInit)||b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeDown)&&(b.removeAttribute(c.swipeDownEnd),b.ha(c.swipeDownInit)||b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))},setupTouch:function(){var a=this,b=this.settings;[].forEach.call(this.node,function(c){var d=function(d){d.preventDefault(),a.touchMoveHandler.call(a,d,c,b)},e=function(d){d.preventDefault(),a.endTouchHandler.call(a,d,c,b)},f=function(d){d.preventDefault(),a.startTouchHandler.call(a,d,c,b)};c.addEventListener(a.touchStart,f),c.addEventListener(a.touchMove,d),c.addEventListener(a.touchEnd,e),c.addEventListener(a.touchCancel,e),c.addEventListener("mouseout",e),c.addEventListener("mouseup",e),c.addEventListener(a.touchEnd,function(){console.info("touchEnd")}),c.addEventListener("mouseout",function(){console.info("mouseout")}),c.addEventListener("mouseup",function(){console.info("mouseup")}),c.addEventListener(a.touchCancel,function(){console.info("touchCancel")}),c.addEventListener(a.touchOut,function(){console.info("touchOut")}),a.hasMouse&&(c.addEventListener("mousedown",f),c.addEventListener("mousemove",d),c.addEventListener("mouseup",e))})},startTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),console.info("touch start"),b.ha(c.moveIndicator)&&(b.removeAttribute(c.moveTouchEnded),b.ha(c.moveTouchInitial)||b.setAttribute(c.moveTouchInitial,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.horizontalIndicator)&&(b.removeAttribute(c.horizontalTouchEnd),b.ha(c.horizontalTouchInit)||b.setAttribute(c.horizontalTouchInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.verticalIndicator)&&(b.removeAttribute(c.verticalTouchEnd),b.ha(c.verticalTouchInit)||b.setAttribute(c.verticalTouchInit,JSON.stringify(d.getTouchPoints(a)))),d.setupSwipe(a,b,c),b.ha(c.tapIndicator)&&!b.ha(c.tapStart)&&b.setAttribute(c.tapStart,setTimeout(function(){clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.doubleTapStart)},700)),d.doDoubleTap(a,b,c)},endTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),b.ha(c.moveTouchInitial)&&b.setAttribute(c.moveTouchEnded,"true"),b.ha(c.horizontalIndicator)&&b.setAttribute(c.horizontalTouchEnd,"true"),b.ha(c.verticalIndicator)&&b.setAttribute(c.verticalTouchEnd,"true"),b.ha(c.swipeRight)&&(d.swipping=!1,b.setAttribute(c.swipeRightEnd,"true"),b.removeAttribute(c.swipeRightInit)),b.ha(c.swipeLeft)&&(d.swipping=!1,b.setAttribute(c.swipeLeftEnd,"true"),b.removeAttribute(c.swipeLeftInit)),b.ha(c.swipeUp)&&(d.swipping=!1,b.setAttribute(c.swipeUpEnd,"true"),b.removeAttribute(c.swipeUpInit)),b.ha(c.swipeDown)&&(d.swipping=!1,b.setAttribute(c.swipeDownEnd,"true"),b.removeAttribute(c.swipeDownInit)),b.ha(c.tapIndicator)&&b.ha(c.tapStart)&&(d.tapCallback(a),clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.tapStart))},touchMoveHandler:function(a,b,c){var d=this;if(c=this.settings,a.preventDefault(),b.ha(c.moveIndicator)&&!b.ha(c.moveTouchEnded)&&b.ha(c.moveTouchInitial)&&(e=JSON.parse(b.getAttribute(c.moveTouchInitial)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),b.style[d.support.transform]="translate3D("+g.translationX+"px, "+g.translationY+"px, 0)"),b.ha(c.horizontalIndicator)&&!b.ha(c.horizontalTouchEnd)&&b.ha(c.horizontalTouchInit)){console.log("should -horizontal move");var e=JSON.parse(b.getAttribute(c.horizontalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationX)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D("+g.translationX+"px, 0, 0)")}if(b.ha(c.verticalIndicator)&&!b.ha(c.verticalTouchEnd)&&b.ha(c.verticalTouchInit)){var e=JSON.parse(b.getAttribute(c.verticalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationY)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D(0, "+g.translationY+"px, 0)")}(b.ha(c.swipeRightInit)||b.ha(c.swipeLefttInit)||b.ha(c.swipeUpInit)||b.ha(c.swipeDownInit))&&(a.touches&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY),d.processSwipe(b,a,c))},swipeRight:function(a,b){return this.setupIndicator(a,"swipeRightCallback",b,"swipeRightThreshold","swipeRight"),this},swipeLeft:function(a,b){return this.setupIndicator(a,"swipeLeftCallback",b,"swipeLeftThreshold","swipeLeft"),this},swipeUp:function(a,b){return this.setupIndicator(a,"swipeUpCallback",b,"swipeUpThreshold","swipeUp"),this},swipeDown:function(a,b){return this.setupIndicator(a,"swipeDownCallback",b,"swipeDownThreshold","swipeDown"),this},move:function(a){return this.setupIndicator(a,"moveCallback",0,"","moveIndicator"),this},horizontalMove:function(a){return this.setupIndicator(a,"moveHorizontalCallback",0,"","horizontalIndicator"),this},verticalMove:function(a){return this.setupIndicator(a,"moveVerticalCallback",0,"","verticalIndicator"),this},rotate:function(a){return this.setupIndicator(a,"rotateCallback",0,"","rotateIndicator"),this},scale:function(a){return this.setupIndicator(a,"scaleCallback",0,"","scaleIndicator"),this},tap:function(a){var c=this;return a||(a=b.noop),c.hasmsGesture?[].forEach.call(this.node,function(b){b.addEventListener("MSGestureTap",a,!1)}):this.setupIndicator(a,"tapCallback",0,"","tapIndicator"),this},dblTap:function(a){{var b=this.settings;d(".touch-log")}return a&&(b.doubleTapCallback=a),this.setupIndicator(a,"doubleTapCallback",0,"","doubleTapIndicator"),this},tapHold:function(a,b,c){var d=this;return a&&(d.tapHoldBeginCallback=a),this.hasmsGesture?(d.tapHoldBeginCallback=a,d.tapHoldEndCallback=b,d.tapHoldCancelCallback=c,[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener("MSGestureHold",function(a){d.tapHoldCallback.call(d,a)},!1)})):[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener(d.touchStart,function(b){d.setupTapHold(a,b)}),d.hasMouse&&a.addEventListener("mousedown",function(b){d.setupTapHold(a,b)})},!1),this},preventTapHoldContext:function(a){a.addEventListener("contextmenu",function(a){a.preventDefault()},!1)},setupTapHold:function(a,b){var c,d=this;c=setTimeout(function(){d.tapHoldBeginCallback.call(d,b),clearTimeout(c)},500),a.addEventListener(d.touchEnd,function(){clearTimeout(c)},!1),a.addEventListener(d.touchCancel,function(){clearTimeout(c)},!1)},tapHoldBeginCallback:b.noop,tapHoldEndCallback:b.noop,tapHoldCancelCallback:b.noop,tapHoldCallback:function(a){var b=this;a.preventDefault(),a.detail&a.MSGESTURE_FLAG_BEGIN&&b.tapHoldBeginCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_END&&b.tapHoldEndCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_CANCEL&&b.tapHoldCancelCallback.call(b,a)},settings:{allowPageScroll:!0,logging:!1,swipeRightThreshold:25,swipeLeftThreshold:-25,swipeUpThreshold:-25,swipeDownThreshold:25,moveThreshold:0,rotateThreshold:0,scaleThreshold:0,doubleTapThreshold:700,tapIndicator:"data-tap",tapStart:"data-tap-start",tapEnded:"data-tap-end",doubleTapIndicator:"data-dbltap",doubleTapStart:"data-dbltap-start",doubleTapEnded:"data-dbltap-end",rotateIndicator:"data-rotate",rotateEnded:"data-rotate-ended",rotateInitial:"data-rotate-initial",scaleIndicator:"data-scale",scaleEnded:"data-scale-ended",scaleInitial:"data-scale-initial",moveIndicator:"data-move",moveTouchEnded:"data-move-touch-ended",moveTouchInitial:"data-move-touch-initial",swipeRight:"data-swiperight",swipeRightInit:"data-swiperight-init",swipeRightEnd:"data-swiperight-end",swipeLeft:"data-swipeleft",swipeLeftInit:"data-swipeLeft-init",swipeLeftEnd:"data-swipeleft-end",swipeUp:"data-swipeup",swipeUpInit:"data-swipeup-init",swipeUpEnd:"data-swipeup-end",swipeDown:"data-swipedown",swipeDownInit:"data-swipedown-init",swipeDownEnd:"data-swipedown-end",horizontalIndicator:"data-move-horizontal",horizontalTouchInit:"data-horizontal-touch-initial",horizontalTouchEnd:"data-horizontal-touch-ended",verticalIndicator:"data-move-vertical",verticalTouchInit:"data-vertical-touch-initial",verticalTouchEnd:"data-vertical-touch-ended",autoMove:!0,autoRotate:!0,autoScale:!0,autoHorizontalMove:!0,autoVerticalMove:!0}},deeptissue.fn.init.prototype=deeptissue.fn,a.deeptissue=deeptissue}(window,$),function(a,b){"use strict";b.fn.move=function(a){return this.setupIndicator(a,"moveCallback",0,"","moveIndicator"),this},b.fn.horizontalMove=function(a){return this.setupIndicator(a,"moveHorizontalCallback",0,"","horizontalIndicator"),this},b.fn.verticalMove=function(a){return this.setupIndicator(a,"moveVerticalCallback",0,"","verticalIndicator"),this}}(window,deeptissue),function(a,b){"use strict";b.fn.tap=function(a){var b=this;return a||(a=function(){}),b.hasmsGesture?[].forEach.call(this.node,function(b){b.addEventListener("MSGestureTap",a,!1)}):this.setupIndicator(a,"tapCallback",0,"","tapIndicator"),this},b.fn.dblTap=function(a){{var b=this.settings;document.querySelector(".touch-log")}return a&&(b.doubleTapCallback=a),this.setupIndicator(a,"doubleTapCallback",0,"","doubleTapIndicator"),this},b.fn.tapHold=function(a){var b=this;return a&&(b.tapHoldBeginCallback=a),this.hasmsGesture?[].forEach.call(this.node,function(a){a.addEventListener("MSGestureHold",function(a){b.tapHoldCallback.call(b,a)},!1)}):[].forEach.call(this.node,function(a){a.addEventListener(b.touchStart,function(c){b.setupTapHold(a,c)}),b.hasMouse&&a.addEventListener("mousedown",function(c){b.setupTapHold(a,c)})},!1),this},b.fn.setupTapHold=function(a,b){var c,d=this;c=setTimeout(function(){d.tapHoldBeginCallback.call(d,b),clearTimeout(c)},500),a.addEventListener(d.touchEnd,function(){clearTimeout(c)},!1),a.addEventListener(d.touchCancel,function(){clearTimeout(c)},!1)},b.fn.tapHoldBeginCallback=function(){},b.fn.tapHoldEndCallback=function(){},b.fn.tapHoldCancelCallback=function(){},b.fn.tapHoldCallback=function(a){console.info("evt.detail - "+a.detail),a.detail&a.MSGESTURE_FLAG_BEGIN&&this.tapHoldBeginCallback.call(this,a),a.detail&a.MSGESTURE_FLAG_END&&this.tapHoldEndCallback.call(this,a),a.detail&a.MSGESTURE_FLAG_CANCEL&&this.tapHoldCancelCallback.call(this,a)}}(window,deeptissue),function(a,b){"use strict";b.fn.rotate=function(a){return this.setupIndicator(a,"rotateCallback",0,"","rotateIndicator"),this}}(window,deeptissue),function(a,b){"use strict";b.fn.scale=function(a){return this.setupIndicator(a,"scaleCallback",0,"","scaleIndicator"),this}}(window,deeptissue);